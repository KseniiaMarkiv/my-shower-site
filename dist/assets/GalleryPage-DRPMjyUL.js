import{R as p,u as j,r as y,j as i}from"./index-B9J7enmy.js";function v(r,n){if(r==null)return{};var e=N(r,n),t,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)t=s[o],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(e[t]=r[t])}return e}function N(r,n){if(r==null)return{};var e={},t=Object.keys(r),o,s;for(s=0;s<t.length;s++)o=t[s],!(n.indexOf(o)>=0)&&(e[o]=r[o]);return e}function d(){return d=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},d.apply(this,arguments)}function b(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,t)}return e}function m(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?b(Object(e),!0).forEach(function(t){P(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):b(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}function P(r,n,e){return n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}const k={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},g=2;class w extends p.Component{constructor(n){super(n),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let e;this.props.breakpointCols&&this.props.breakpointCols.default?e=this.props.breakpointCols.default:e=parseInt(this.props.breakpointCols)||g,this.state={columnCount:e}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const n=window&&window.innerWidth||1/0;let e=this.props.breakpointCols;typeof e!="object"&&(e={default:parseInt(e)||g});let t=1/0,o=e.default||g;for(let s in e){const l=parseInt(s);l>0&&n<=l&&l<t&&(t=l,o=e[s])}o=Math.max(1,parseInt(o)||1),this.state.columnCount!==o&&this.setState({columnCount:o})}itemsInColumns(){const n=this.state.columnCount,e=new Array(n),t=p.Children.toArray(this.props.children);for(let o=0;o<t.length;o++){const s=o%n;e[s]||(e[s]=[]),e[s].push(t[o])}return e}renderColumns(){const{column:n,columnAttrs:e={},columnClassName:t}=this.props,o=this.itemsInColumns(),s=`${100/o.length}%`;let l=t;l&&typeof l!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof l>"u"&&(l="my-masonry-grid_column"));const c=m(m(m({},n),e),{},{style:m(m({},e.style),{},{width:s}),className:l});return o.map((a,u)=>p.createElement("div",d({},c,{key:u}),a))}logDeprecated(n){console.error("[Masonry]",n)}render(){const n=this.props,{children:e,breakpointCols:t,columnClassName:o,columnAttrs:s,column:l,className:c}=n,a=v(n,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let u=c;return typeof c!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof c>"u"&&(u="my-masonry-grid")),p.createElement("div",d({},a,{className:u}),this.renderColumns())}}w.defaultProps=k;function I(){const{slug:r}=j(),[n,e]=y.useState([]),[t,o]=y.useState(null);y.useEffect(()=>{const a=`gallery-${r.toLowerCase()}`,u=sessionStorage.getItem(a);if(u)return void e(JSON.parse(u));fetch(`https://email-api-p7zg.onrender.com/api/gallery/${r}`).then(f=>f.json()).then(f=>{const h=f.filter(C=>new URL(C.url).pathname.includes(`/${r}/`));h.sort((C,O)=>C.name.localeCompare(O.name)),sessionStorage.setItem(a,JSON.stringify(h)),e(h)}).catch(console.error)},[r]);const s=a=>o(a),l=()=>o(null),c={default:4,1200:4,992:3,768:2,576:1};return i.jsxs("div",{className:"container gallery-page pb-4",children:[i.jsx(w,{breakpointCols:c,className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:n.map((a,u)=>i.jsx("div",{className:"gallery-item",onClick:()=>s(a),children:a.file_type==="non-image"?i.jsxs("video",{className:"gallery-image shadow-sm",preload:"metadata",width:"100%",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,controls:!1,poster:`${a.url}?tr=w-600`,children:[i.jsx("source",{src:`${a.url}?tr=format=mp4,w-600`,type:"video/mp4"}),"Your browser does not support the video tag."]}):i.jsx("img",{src:`${a.url}?tr=w-600`,alt:a.name,className:"img-fluid shadow-sm gallery-image",loading:"lazy"})},u))}),t&&i.jsxs("div",{className:"fullscreen-overlay",onClick:a=>a.target.classList.contains("fullscreen-overlay")&&l(),children:[i.jsx("button",{className:"close-button",onClick:l,children:"Ã—"}),t.file_type==="non-image"?i.jsx("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,controls:!0,className:"fullscreen-media",children:i.jsx("source",{src:`${t.url}?tr=format=mp4,w-1200`,type:"video/mp4"})}):i.jsx("img",{src:`${t.url}?tr=w-1200`,alt:t.name,className:"fullscreen-media"})]})]})}export{I as default};
